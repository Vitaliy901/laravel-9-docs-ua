# Локалізація

- [Вступ](#introduction)
  - [Налаштування локалізації](#configuring-the-locale)
  - [Конструктор слів у множині](#pluralization-language)
- [Визначення рядків перекладу](#defining-translation-strings)
  - [Використання коротких ключів](#using-short-keys)
  - [Використання рядків перекладу як ключів](#using-translation-strings-as-keys)
- [Отримання рядків перекладу](#retrieving-translation-strings)
  - [Заміна параметрів у рядках перекладу](#replacing-parameters-in-translation-strings)
  - [Множинна](#pluralization)
- [Перевизначення мовних файлів пакетів](#overriding-package-language-files)

<a name="introduction"></a>

## Вступ

Функціонал локалізації Laravel забезпечує зручний спосіб отримання рядків різними мовами, що дозволяє легко підтримувати декілька мов у вашому додатку.

Laravel надає два способи керування рядками перекладу. По-перше, мовні рядки можуть зберігатися у файлах у каталозі `lang`. У цьому каталозі можуть бути підкаталоги для кожної мови, які підтримуються додатком. Це підхід, який Laravel використовує для керування рядками перекладу власного вбудованого функціоналу Laravel, наприклад повідомлення про помилки перевірки:

```catalog
    /lang
        /en
            messages.php
        /es
            messages.php
```

Або, рядки перекладу можуть бути визначені у файлах JSON, розміщених у каталозі `lang`. При такому підході кожна мова, яку підтримує ваш додаток, матиме відповідний файл JSON у цьому каталозі. Цей підхід рекомендовано для додатків, які мають велику кількість перекладених рядків:

```catalog
    /lang
        en.json
        es.json
```

Ми обговоримо кожен підхід до керування рядками перекладу в цій документації.

<a name="configuring-the-locale"></a>

### Налаштування локалізації

Мова за замовчуванням для вашого додатка зберігається в параметрі налаштування `locale` файлу конфігурації `config/app.php`. Ви можете змінити це значення відповідно до потреб вашого додатку.

Ви можете змінити мову за замовчуванням для одного HTTP-запиту під час виконання, використовуючи метод `setLocale`, наданого фасадом `App`:

```php
use Illuminate\Support\Facades\App;

Route::get('/greeting/{locale}', function ($locale) {
	if (! in_array($locale, ['en', 'es', 'fr'])) {
		abort(400);
	}

	App::setLocale($locale);

	//
});
```

Ви можете налаштувати «резервну мову», яка використовуватиметься, коли активна мова не містить заданого рядка перекладу. Як і мова за замовчуванням, резервна мова також налаштована у файлі конфігурації `config/app.php`:

```php
    'fallback_locale' => 'en',
```

<a name="determining-the-current-locale"></a>

#### Визначення поточної мови

Ви можете використовувати методи `currentLocale` та `isLocale` фасада `App`, щоб визначити поточну мову або перевірити відповідність зазначеної мови:

```php
use Illuminate\Support\Facades\App;

$locale = App::currentLocale();

if (App::isLocale('en')) {
	//
}
```

<a name="pluralization-language"></a>

### Конструктор слів у множині

Ви можете вказати конструктору слів у множині Laravel, який використовується Eloquent та іншими частинами фреймворку для перетворення рядків однини на рядки множини, використовувати іншу мову, замість англійської. Це можна зробити, викликавши метод `useLanguage` у методі `boot` одного з постачальників служб вашого додатку. На даний момент конструктор слів у множині підтримує наступні мови: французька, норвезько-бокмальська, португальська, іспанська та турецька:

```php
use Illuminate\Support\Pluralizer;

/**
 * Bootstrap any application services.
 *
 * @return void
 */
public function boot()
{
	Pluralizer::useLanguage('spanish');

	// ...
}
```

> **Warning**  
> Якщо ви змінюєте конструктор слів у множині, вам слід явно визначити [імена таблиць](eloquent.md#table-names) вашої моделі Eloquent.

<a name="defining-translation-strings"></a>

## Визначення рядків перекладу

<a name="using-short-keys"></a>

### Використання коротких ключів

Як правило, рядки перекладу зберігаються у файлах у каталозі `lang`. У цьому каталозі має бути підкаталог для кожної мови, яку підтримує ваш додаток. Це підхід, який Laravel використовує для керування рядками перекладу вбудованого функціоналу Laravel, наприклад повідомлення про помилки перевірки:

```catalog
    /lang
        /en
            messages.php
        /es
            messages.php
```

Усі мовні файли повертають масив рядків із ключами. Наприклад:

```php
<?php

// lang/en/messages.php

return [
	'welcome' => 'Welcome to our application!',
];
```

> **Warning**  
> Для мов, які відрізняються залежно від території, ви повинні назвати каталоги мов відповідно до ISO 15897. Наприклад, "en_GB" слід використовувати для британської англійської, а не "en-gb".

<a name="using-translation-strings-as-keys"></a>

### Використання рядків перекладу як ключів

Для додатків із великою кількістю рядків, які можна перекладати, визначення кожного рядка за допомогою «короткого ключа» може стати заплутаним під час посилання на ключі у ваших шаблонах, і це втомливо постійно визначати ключі для кожного рядка перекладу, який підтримує ваш додаток.

З цієї причини Laravel також надає підтримку для визначення рядків перекладу, використовуючи переклад рядка «за замовчуванням» як ключ. Файли перекладу, які використовують рядки перекладу у якості ключів, зберігаються як файли JSON у каталозі `lang`. Наприклад, якщо ваш додаток має іспанський переклад, ви повинні створити файл `lang/es.json`:

```json
{
  "I love programming.": "Me encanta programar."
}
```

#### Конфлікти ключів/файлів

Ви не повинні визначати рядкові ключі перекладу, які конфліктують з іншими іменами файлів перекладу. Наприклад, переклад `__('Action')` для локалі "NL", за наявності файла `nl/action.php` і відстуності `nl.json`, призведе до того, що перекладач поверне вміст `nl/action.php`.

<a name="retrieving-translation-strings"></a>

## Отримання рядків перекладу

Ви можете отримати рядки перекладу зі своїх мовних файлів за допомогою допоміжної функції `__`. Якщо ви використовуєте «швидкі ключі» для визначення рядків перекладу, вам слід передати файл, який містить ключ, і сам ключ до функції `__` за допомогою синтаксису «точкової нотації». Наприклад, давайте отримаємо рядок перекладу `welcome` з мовного файлу `lang/en/messages.php`:

```php
echo __('messages.welcome');
```

Якщо вказаний рядок перекладу не існує, функція `__` поверне ключ рядка перекладу. Отже, використовуючи наведений вище приклад, функція `__` повертатиме `messages.welcome`, якщо рядок перекладу не існує.

Якщо ви використовуєте [рядки перекладу за замовчанням як ключі перекладу](#using-translation-strings-as-keys), вам слід передати переклад вашого рядка за замовчанням у функцію `__`;

```php
echo __('I love programming.');
```

Знову ж таки, якщо рядок перекладу не існує, функція `__` поверне наданий ключ рядка перекладу.

Якщо ви використовуєте [систему шаблонів Blade](blade.md), ви можете використовувати синтаксис `{{ }}` "echo" для відображення рядка перекладу:

```php
{{ __('messages.welcome') }}
```

<a name="replacing-parameters-in-translation-strings"></a>

### Заміна параметрів у рядках перекладу

Якщо ви бажаєте, ви можете визначити заповнювачі в рядках перекладу. Усі заповнювачі мають префікс `:`. Наприклад, ви можете визначити привітальне повідомлення за допомогою імені заповнювача:

```php
'welcome' => 'Welcome, :name',
```

Щоб замінити заповнювачі під час отримання рядка перекладу, ви можете передати масив замін як другий аргумент функції `__`:

```php
    echo __('messages.welcome', ['name' => 'dayle']);
```

Якщо всі літери заповнювача великі або заповнювач має тільки першу велику літеру, то перекладене значення буде з відповідним регістром:

```php
'welcome' => 'Welcome, :NAME', // Welcome, DAYLE
'goodbye' => 'Goodbye, :Name', // Goodbye, Dayle
```

<a name="pluralization"></a>

### Множинна

Множина є складною проблемою, оскільки різні мови мають різноманітні складні правила для утворення слів у множині; однак Laravel може допомогти вам перекладати рядки по-іншому на основі правил множини, які ви визначаєте. Використовуючи `|` символ, ви можете розрізняти форми однини та множини рядка:

```php
'apples' => 'There is one apple|There are many apples',
```

Звичайно, множина також підтримується при використанні [рядків перекладу як ключів](#using-translation-strings-as-keys):

```json
{
  "There is one apple|There are many apples": "Hay una manzana|Hay muchas manzanas"
}
```

Ви навіть можете створити більш складні правила множини, які визначають рядки перекладу для кількох діапазонів значень:

```php
'apples' => '{0} There are none|[1,19] There are some|[20,*] There are many',
```

Після визначення рядка перекладу, який має параметри множини, ви можете скористатися функцією `trans_choice`, щоб отримати рядок для даного "підрахунку". У цьому прикладі, оскільки кількість більше одиниці, повертається форма множини рядка перекладу:

```php
echo trans_choice('messages.apples', 10);
```

Ви також можете визначити атрибути заповнювачів у рядках множини. Ці заповнювачі можна замінити, передавши масив як третій аргумент функції `trans_choice`:

```php
'minutes_ago' => '{1} :value minute ago|[2,*] :value minutes ago',

echo trans_choice('time.minutes_ago', 5, ['value' => 5]);
```

Якщо ви бажаєте відобразити ціле значення, передане у функцію `trans_choice`, ви можете використати вбудований заповнювач `:count`:

```php
'apples' => '{0} There are none|{1} There is one|[2,*] There are :count',
```

<a name="overriding-package-language-files"></a>

## Перевизначення мовних файлів пакетів

Деякі пакунки можуть поставлятися з власними мовними файлами. Замість того, щоб змінювати основні файли пакета, щоб налаштувати ці рядки, ви можете змінити їх, розмістивши файли в каталозі `lang/vendor/{package}/{locale}`.

Так, наприклад, якщо вам потрібно замінити рядки англійського перекладу в `messages.php` для пакета під назвою `skyrim/hearthfire`, вам слід розмістити мовний файл за адресою: `lang/vendor/hearthfire/en/messages.php`. У цьому файлі ви повинні визначити лише рядки перекладу, які ви бажаєте замінити. Будь-які рядки перекладу, які ви не перевизначите, усе одно будуть завантажені з оригінальних мовних файлів пакета.
